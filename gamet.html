<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦™æ¸¯èŒ¶é¤å»³æ–‡åŒ–æ¢ç´¢</title>
    <style>
        /* åŸºæœ¬æ¨£å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 700px;
            background: #fff;
            color: #333;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.18);
            padding: 1.5rem;
            margin: 1rem;
            position: relative;
        }
        
        h1 {
            text-align: center;
            margin: 0 0 1.5rem 0;
            font-size: 1.75rem;
            background: linear-gradient(45deg, #e67e22, #d35400);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .progress-container {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .progress-bar {
            height: 0.5rem;
            background: #e9ecef;
            border-radius: 1rem;
            overflow: hidden;
            margin: 0.5rem 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .location-card {
            background: #f8f9fa;
            padding: 1.25rem;
            border-left: 4px solid #e67e22;
            border-radius: 8px;
            margin-bottom: 1rem;
            transition: transform 0.3s ease;
        }
        
        .location-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .location-card h2 {
            font-size: 1.25rem;
            margin-bottom: 0.75rem;
            color: #2c3e50;
            display: flex;
            align-items: center;
        }
        
        .distance-badge {
            background: #e7f3ff;
            color: #004085;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }
        
        .btn {
            background: #e67e22;
            color: #fff;
            border: none;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            margin: 0.25rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn:hover {
            background: #d35400;
            transform: translateY(-1px);
        }
        
        .btn-success {
            background: #27ae60;
        }
        
        .btn-warning {
            background: #f39c12;
            color: #000;
        }
        
        .btn-danger {
            background: #c0392b;
        }
        
        .btn-info {
            background: #3498db;
        }
        
        input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.875rem;
            margin: 0.5rem 0;
            transition: border-color 0.3s;
        }
        
        input:focus {
            border-color: #e67e22;
            outline: none;
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            margin: 0.75rem 0;
        }
        
        .selfie-box {
            text-align: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px dashed #ddd;
        }
        
        .selfie-canvas {
            display: none;
        }
        
        .selfie-img {
            max-width: 100%;
            margin-top: 0.5rem;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .completion {
            text-align: center;
            padding: 1.5rem;
        }
        
        .qr-code {
            margin: 1.5rem 0;
        }
        
        .qr-code img {
            max-width: 200px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 1rem;
        }
        
        .modal-content {
            background: #fff;
            border-radius: 12px;
            padding: 1.5rem;
            max-width: 560px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal h2 {
            margin-bottom: 1rem;
            color: #2c3e50;
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #fff;
            cursor: pointer;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
        }
        
        .poem-mask {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 1.25rem;
            text-align: center;
            padding: 2rem;
            z-index: 9999;
            line-height: 1.8;
        }
        
        .poem-content {
            max-width: 500px;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }
        
        .gps-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            color: #333;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
            z-index: 9999;
            display: none;
            font-size: 0.875rem;
            max-width: 90%;
            width: 400px;
        }
        
        .gps-prompt button {
            margin: 0 4px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .location-card {
                padding: 1rem;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                margin: 0.25rem 0;
            }
            
            .poem-mask {
                font-size: 1.1rem;
                padding: 1rem;
            }
        }
        
        /* ä¿è­·æ¨£å¼ */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        .no-context {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* æµ®æ°´å° */
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 4rem;
            color: rgba(255, 255, 255, 0.03);
            z-index: -1;
            pointer-events: none;
            white-space: nowrap;
            font-weight: bold;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 0.25rem;
            font-size: 0.75rem;
            color: #666;
        }
        
        .location-icon {
            margin-right: 8px;
            font-size: 1.2em;
        }
        
        .food-img {
            width: 100%;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="no-select no-context" oncontextmenu="return false;">
    <div class="watermark">é¦™æ¸¯èŒ¶é¤å»³æ¢ç´¢</div>
    
    <div class="container">
        <h1>ğŸœ é¦™æ¸¯èŒ¶é¤å»³æ–‡åŒ–æ¢ç´¢</h1>
        
        <div class="progress-container">
            <div>æ¢ç´¢é€²åº¦ï¼š<span id="progress-count">0</span> / 10</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text">
                <span>å·²å®Œæˆï¼š<span id="progress-percent">0</span>%</span>
                <span>å‰©é¤˜ï¼š<span id="remaining-percent">100</span>%</span>
            </div>
        </div>

        <!-- å…§å®¹å°‡ç”±JavaScriptå‹•æ…‹è¼‰å…¥ -->
        <div id="game-content"></div>
    </div>

    <!-- å½±ç‰‡æ¨¡æ…‹æ¡† -->
    <div id="video-modal" class="modal" style="display:none;">
        <button class="modal-close" onclick="closeVideo()">&times;</button>
        <div class="modal-content">
            <h2 id="video-title">å½±ç‰‡æ¨™é¡Œ</h2>
            <p id="video-description">å½±ç‰‡æè¿°</p>
            <div class="video-container">
                <iframe id="video-player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <p style="font-size:0.75rem;color:#555;margin-top:0.5rem;">åœ¨ARç‰ˆæœ¬ä¸­ï¼Œé€™æ®µå½±ç‰‡æœƒåœ¨æ‚¨åˆ°é”åœ°é»æ™‚è‡ªå‹•æ’­æ”¾ï¼Œä¸¦èˆ‡å¯¦æ™¯çµåˆ</p>
        </div>
    </div>

    <!-- GPS æç¤º -->
    <div id="gpsPrompt" class="gps-prompt">
        <div>ğŸ“ ä½ å·²åˆ°é” <strong id="promptPoiName"></strong>ï¼</div>
        <div style="margin-top:8px">
            <button class="btn btn-info" onclick="playSelected('story')">æ’­æ”¾æ•…äº‹é€²åº¦</button>
            <button class="btn btn-danger" onclick="playSelected('hist')">æ’­æ”¾æ­·å²ç‰‡æ®µ</button>
            <button class="btn" onclick="closePrompt()">ç¨å¾Œå†èªª</button>
        </div>
    </div>

    <script>
        // ä»£ç¢¼ä¿è­·æªæ–½
        (function() {
            'use strict';
            
            // ç¦ç”¨å³éµèœå–®
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            // ç¦ç”¨æ–‡æœ¬é¸æ“‡
            document.addEventListener('selectstart', function(e) {
                e.preventDefault();
                return false;
            });
            
            // ç¦ç”¨æ‹–æ‹½
            document.addEventListener('dragstart', function(e) {
                e.preventDefault();
                return false;
            });
            
            // ç¦ç”¨è¤‡è£½ã€å‰ªåˆ‡ã€ç²˜è²¼
            document.addEventListener('copy', function(e) {
                e.preventDefault();
                return false;
            });
            
            document.addEventListener('cut', function(e) {
                e.preventDefault();
                return false;
            });
            
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                return false;
            });
            
            // æª¢æ¸¬é–‹ç™¼è€…å·¥å…·
            function detectDevTools() {
                var threshold = 160;
                var widthThreshold = window.outerWidth - window.innerWidth > threshold;
                var heightThreshold = window.outerHeight - window.innerHeight > threshold;
                
                if (widthThreshold || heightThreshold) {
                    document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;background:#333;color:white;font-size:24px;">ğŸš« ç¦æ­¢ä½¿ç”¨é–‹ç™¼è€…å·¥å…·</div>';
                }
            }
            
            setInterval(detectDevTools, 1000);
            
            // åœ¨æ§åˆ¶å°é¡¯ç¤ºè­¦å‘Š
            console.log('%cğŸš« è«‹å‹¿è¤‡è£½æ­¤ä»£ç¢¼', 'color: red; font-size: 20px; font-weight: bold;');
            console.log('%cæ­¤æ‡‰ç”¨ç¨‹å¼ä»£ç¢¼å—ç‰ˆæ¬Šä¿è­·', 'color: orange; font-size: 16px;');
        })();

        // éŠæˆ²ç‹€æ…‹
        var currentLocation = 1;
        var totalLocations = 10;
        var hintCounters = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0};
        var completedLocations = new Set();

        // ä¸‹ä¸€åœ°é»è©©æ„æç¤º
        var nextPoem = {
            2: 'å¾çµ²è¥ªå¥¶èŒ¶çš„èµ·æºï¼Œèµ°å‘ç‚’è›‹å¤šå£«çš„å‚³å¥‡ï¼Œä¸‹ä¸€ç«™å°‡å¸¶ä½ å“åšæ¾³æ´²ç‰›å¥¶å…¬å¸çš„ç¶“å…¸æ—©é¤ã€‚',
            3: 'æ—©é¤ä¹‹å¾Œï¼Œè®“æˆ‘å€‘å‰å¾€é¦™æ¸¯æœ€å…·ä»£è¡¨æ€§çš„èŒ¶é¤å»³ä¹‹ä¸€ï¼Œæ„Ÿå—å¥¶æ²¹è±¬ä»”åŒ…çš„é­…åŠ›ã€‚',
            4: 'å¾ç¶“å…¸èŒ¶é¤å»³èµ°å‘æ˜æ˜Ÿæœ€æ„›ï¼Œä¸‹ä¸€ç«™å°‡å¸¶ä½ æ¢ç´¢è¯æ˜Ÿå†°å®¤çš„ç¨ç‰¹é¢¨å‘³ã€‚',
            5: 'æ˜æ˜Ÿå…‰é¡§å¾Œï¼Œè®“æˆ‘å€‘èµ°é€²å‚³çµ±å†°å®¤ï¼Œå“åšç¥¥èˆˆå’–å•¡å®¤çš„æ‡·èˆŠç¾é£Ÿã€‚',
            6: 'å¾å‚³çµ±å†°å®¤èµ°å‘æ‡·èˆŠé¤å®¤ï¼Œä¸‹ä¸€ç«™å°‡å¸¶ä½ æ„Ÿå—ç¾éƒ½é¤å®¤çš„æ™‚å…‰å€’æµã€‚',
            7: 'æ‡·èˆŠä¹‹æ—…å¾Œï¼Œè®“æˆ‘å€‘å‰å¾€é‡‘è¯å†°å»³ï¼Œå“åšå…¨æ¸¯æœ€è‘—åçš„è è˜¿æ²¹ã€‚',
            8: 'å¾è è˜¿æ²¹èµ°å‘æ¨½ä»”å¥¶èŒ¶ï¼Œä¸‹ä¸€ç«™å°‡å¸¶ä½ é«”é©—ç‘è¨˜å’–å•¡çš„ç¨ç‰¹é¢¨å‘³ã€‚',
            9: 'æ¨½ä»”å¥¶èŒ¶ä¹‹å¾Œï¼Œè®“æˆ‘å€‘èµ°é€²æ°¸è¯é¢å®¶ï¼Œå“åšå‚³çµ±ç«¹æ˜‡éºµçš„ç¨ç‰¹å£æ„Ÿã€‚',
            10: 'å¾ç«¹æ˜‡éºµèµ°å‘ç‘å£«é›ç¿¼ï¼Œæœ€å¾Œä¸€ç«™å°‡å¸¶ä½ é«”é©—å¤ªå¹³é¤¨é¤å»³çš„ç¶“å…¸è¥¿é¤ã€‚'
        };

        // å‹•æ…‹è¼‰å…¥éŠæˆ²å…§å®¹
        function loadGameContent() {
            var content = '';
            
            // é¡Œç›®1 - è˜­èŠ³åœ’
            content += '<div id="location-1" class="location-card">';
            content += '<h2><span class="location-icon">ğŸµ</span> è˜­èŠ³åœ’<span id="dist-1" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
            content += '<p><strong>æ•…äº‹ï¼š</strong>å‰µç«‹æ–¼1952å¹´çš„è˜­èŠ³åœ’æ˜¯é¦™æ¸¯æœ€æ­·å²æ‚ ä¹…çš„èŒ¶é¤å»³ä¹‹ä¸€ï¼Œå‰µå§‹äººæ—æœ¨æ²³å…ˆç”Ÿé¦–å‰µ"çµ²è¥ªå¥¶èŒ¶"å’Œ"é´›é´¦"ï¼Œæˆç‚ºé¦™æ¸¯é£²é£Ÿæ–‡åŒ–çš„æ¨™èªŒã€‚</p>';
            content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>çµ²è¥ªå¥¶èŒ¶ã€å¥¶æ²¹è±¬ä»”åŒ…ã€è”¥æ²¹é›æ‰’æ’ˆä¸</p>';
            content += '<div class="button-group">';
            content += '<button class="btn btn-danger" onclick="showVideo(1,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
            content += '<button class="btn btn-info" onclick="showVideo(1,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
            content += '</div>';
            content += '<p><strong>å•é¡Œï¼š</strong>è˜­èŠ³åœ’çš„å‰µå§‹äººæ—æœ¨æ²³å…ˆç”Ÿé¦–å‰µäº†å“ªå…©ç¨®ç¶“å…¸é£²å“ï¼Ÿ</p>';
            content += '<input type="text" id="answer-1" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
            content += '<div class="button-group">';
            content += '<button class="btn" onclick="checkAnswer(1,\'çµ²è¥ªå¥¶èŒ¶å’Œé´›é´¦\')">æäº¤ç­”æ¡ˆ</button>';
            content += '<button class="btn btn-warning" onclick="showHint(1)">ğŸ’¡ æç¤º (<span id="hint-count-1">0</span>/3)</button>';
            content += '</div>';
            content += '<div class="selfie-box">';
            content += '<button class="btn btn-success" onclick="takeSelfie(1)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
            content += '<canvas id="canvas-1" class="selfie-canvas" width="600" height="600"></canvas>';
            content += '<img id="selfie-1" class="selfie-img" style="display:none;">';
            content += '</div>';
            content += '</div>';
            
            document.getElementById('game-content').innerHTML = content;
        }

        // æ›´æ–°é€²åº¦æ¢
        function updateProgress() {
            var completed = completedLocations.size;
            var pc = Math.min((completed / totalLocations) * 100, 100);
            
            document.getElementById('progress-count').textContent = completed;
            document.getElementById('progress-percent').textContent = Math.round(pc);
            document.getElementById('remaining-percent').textContent = Math.round(100 - pc);
            document.getElementById('progress-fill').style.width = pc + '%';
        }

        // é¡¯ç¤ºè©©æ„æç¤ºä¸¦å‰å¾€ä¸‹ä¸€åœ°é»
        function showPoemThenNext() {
            document.getElementById('location-' + currentLocation).style.display = 'none';
            completedLocations.add(currentLocation);
            updateProgress();
            
            var wrap = document.createElement('div');
            wrap.id = 'poem-mask';
            wrap.className = 'poem-mask';
            wrap.innerHTML = 
                '<div class="poem-content">' +
                    '<p>' + (nextPoem[currentLocation + 1] || 'æ­å–œæ‚¨å®Œæˆæ‰€æœ‰æ¢ç´¢ï¼') + '</p>' +
                    '<button class="btn btn-success" onclick="goNextLocation()">æ¢ç´¢ä¸‹å€‹åœ°é»</button>' +
                '</div>';
            document.body.appendChild(wrap);
        }

        // å‰å¾€ä¸‹ä¸€åœ°é»
        function goNextLocation() {
            var mask = document.getElementById('poem-mask');
            if (mask) mask.remove();
            
            currentLocation++;
            
            if (currentLocation <= totalLocations) {
                // å‹•æ…‹è¼‰å…¥ä¸‹ä¸€å€‹åœ°é»
                loadLocation(currentLocation);
            } else {
                completeGame();
            }
        }

        // å‹•æ…‹è¼‰å…¥åœ°é»
        function loadLocation(locationNum) {
            var content = '';
            
            if (locationNum === 2) {
                // é¡Œç›®2 - æ¾³æ´²ç‰›å¥¶å…¬å¸
                content += '<div id="location-2" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ³</span> æ¾³æ´²ç‰›å¥¶å…¬å¸<span id="dist-2" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>æ¾³æ´²ç‰›å¥¶å…¬å¸æ˜¯ä½æ•¦çš„åœ°æ¨™èŒ¶é¤å»³ï¼Œä»¥å…¶å¿«é€Ÿæœå‹™å’Œç¶“å…¸æ¸¯å¼æ—©é¤èåï¼Œå°¤å…¶æ˜¯ç‚’è›‹å¤šå£«ï¼Œè¢«è­½ç‚ºé¦™æ¸¯æœ€ç¾å‘³çš„ç‚’è›‹ã€‚</p>';
                content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>ç‚’è›‹å¤šå£«ã€ç‡‰å¥¶ã€è›‹ç™½ç‡‰é®®å¥¶</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(2,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(2,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>æ¾³æ´²ç‰›å¥¶å…¬å¸æœ€è‘—åçš„æ—©é¤èœå¼æ˜¯ä»€éº¼ï¼Ÿ</p>';
                content += '<input type="text" id="answer-2" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(2,\'ç‚’è›‹å¤šå£«\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(2)">ğŸ’¡ æç¤º (<span id="hint-count-2">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(2)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-2" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-2" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 3) {
                // é¡Œç›®3 - ç¿ è¯é¤å»³
                content += '<div id="location-3" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ</span> ç¿ è¯é¤å»³<span id="dist-3" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>ç¿ è¯é¤å»³æ˜¯é¦™æ¸¯æœ€å…·ä»£è¡¨æ€§çš„é€£é–èŒ¶é¤å»³ä¹‹ä¸€ï¼Œå‰µç«‹æ–¼1967å¹´ï¼Œå¾æ—ºè§’çš„ä¸€å®¶å°å†°å®¤ç™¼å±•æˆç‚ºä¸Šå¸‚ä¼æ¥­ï¼Œè¦‹è­‰äº†é¦™æ¸¯èŒ¶é¤å»³æ–‡åŒ–çš„æ¼”è®Šã€‚</p>';
                content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>å¥¶æ²¹è±¬ä»”åŒ…ã€é­šè›‹æ²³ç²‰ã€æµ·å—é›é£¯</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(3,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(3,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>ç¿ è¯é¤å»³æœ€è‘—åçš„åŒ…é»æ˜¯ä»€éº¼ï¼Ÿ</p>';
                content += '<input type="text" id="answer-3" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(3,\'å¥¶æ²¹è±¬ä»”åŒ…\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(3)">ğŸ’¡ æç¤º (<span id="hint-count-3">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(3)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-3" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-3" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 4) {
                // é¡Œç›®4 - è¯æ˜Ÿå†°å®¤
                content += '<div id="location-4" class="location-card">';
                content += '<h2><span class="location-icon">â­</span> è¯æ˜Ÿå†°å®¤<span id="dist-4" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>è¯æ˜Ÿå†°å®¤ç”±å‰è¯æ˜Ÿå”±ç‰‡å…¬å¸é«˜å±¤å‰µç«‹ï¼Œä»¥æ‡·èˆŠè£ä¿®å’Œæ˜æ˜Ÿæ•ˆæ‡‰èåï¼Œç‰†ä¸Šæ›æ»¿æ˜æ˜Ÿç°½åå’Œå”±ç‰‡å°å¥—ï¼Œæ˜¯é¦™æ¸¯å¨›æ¨‚åœˆäººå£«çš„èšè…³åœ°ã€‚</p>';
                content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>æ ¡é•·å¤šå£«ã€é»‘æ¾éœ²ç‚’è›‹å¤šå£«ã€å¥¶èŒ¶ç´…è±†å†°</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(4,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(4,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>è¯æ˜Ÿå†°å®¤æœ€è‘—åçš„å¤šå£«æ˜¯ä»¥å“ªä½é¦™æ¸¯æ¨‚å£‡åäººå‘½åï¼Ÿ</p>';
                content += '<input type="text" id="answer-4" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(4,\'æ ¡é•·\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(4)">ğŸ’¡ æç¤º (<span id="hint-count-4">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(4)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-4" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-4" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 5) {
                // é¡Œç›®5 - ç¥¥èˆˆå’–å•¡å®¤
                content += '<div id="location-5" class="location-card">';
                content += '<h2><span class="location-icon">â˜•</span> ç¥¥èˆˆå’–å•¡å®¤<span id="dist-5" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>ç¥¥èˆˆå’–å•¡å®¤æ˜¯è·‘é¦¬åœ°çš„å‚³çµ±å†°å®¤ï¼Œæ“æœ‰ç´„70å¹´æ­·å²ï¼Œä¿ç•™è‘—å‚³çµ±ç´™çš®çŸ³ç£šè£æ½¢ï¼Œæ˜¯æœ¬åœ°åäººå’Œè¡—åŠçš„èšè…³é»ï¼Œå……æ»¿è€é¦™æ¸¯æƒ…æ‡·ã€‚</p>';
                content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>é…¥çš®è›‹æ’»ã€é¤è‚‰ç…è›‹è è˜¿åŒ…ã€å¥¶èŒ¶</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(5,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(5,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>ç¥¥èˆˆå’–å•¡å®¤ä½æ–¼é¦™æ¸¯å“ªå€‹åœ°å€ï¼Ÿ</p>';
                content += '<input type="text" id="answer-5" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(5,\'è·‘é¦¬åœ°\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(5)">ğŸ’¡ æç¤º (<span id="hint-count-5">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(5)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-5" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-5" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 6) {
                // é¡Œç›®6 - ç¾éƒ½é¤å®¤
                content += '<div id="location-6" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ®</span> ç¾éƒ½é¤å®¤<span id="dist-6" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>ç¾éƒ½é¤å®¤æ˜¯æ²¹éº»åœ°çš„æ‡·èˆŠåœ°æ¨™ï¼Œé–‹æ¥­æ–¼1950å¹´ä»£ï¼Œä¿ç•™è‘—å½©è‰²ç»ç’ƒçª—ã€èˆŠå¼é¢¨æ‰‡å’Œé¦¬è³½å…‹ç“·ç£šï¼Œæ˜¯è¨±å¤šé›»å½±å’Œé›»è¦–åŠ‡çš„å–æ™¯åœ°ã€‚</p>';
                content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>éŒ¦é¹µé›²åã€ç„—æ’éª¨é£¯ã€ç´…è±†å†°</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(6,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(6,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>ç¾éƒ½é¤å®¤ä»¥å…¶æ‡·èˆŠçš„ä»€éº¼è¨­è¨ˆå…ƒç´ èåï¼Ÿ</p>';
                content += '<input type="text" id="answer-6" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(6,\'å½©è‰²ç»ç’ƒçª—\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(6)">ğŸ’¡ æç¤º (<span id="hint-count-6">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(6)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-6" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-6" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 7) {
                // é¡Œç›®7 - é‡‘è¯å†°å»³
                content += '<div id="location-7" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ¥</span> é‡‘è¯å†°å»³<span id="dist-7" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>é‡‘è¯å†°å»³æ˜¯å¤ªå­çš„è€å­—è™Ÿå†°å®¤ï¼Œè‡ª1973å¹´èµ·ç‡Ÿæ¥­ï¼Œä»¥å…¶é¦³åè è˜¿æ²¹èåå…¨æ¸¯ï¼Œæ¯æ—¥æ–°é®®å‡ºçˆçš„è è˜¿åŒ…å¤–çš®é…¥è„†ï¼Œç‰›æ²¹é¦™æ¿ƒã€‚</p>';
                content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>è è˜¿æ²¹ã€å¥¶èŒ¶ã€è›‹æ’»</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(7,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(7,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>é‡‘è¯å†°å»³æœ€è‘—åçš„åŒ…é»æ˜¯ä»€éº¼ï¼Ÿ</p>';
                content += '<input type="text" id="answer-7" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(7,\'è è˜¿æ²¹\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(7)">ğŸ’¡ æç¤º (<span id="hint-count-7">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(7)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-7" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-7" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 8) {
                // é¡Œç›®8 - ç‘è¨˜å’–å•¡
                content += '<div id="location-8" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ¥¤</span> ç‘è¨˜å’–å•¡<span id="dist-8" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>ç‘è¨˜å’–å•¡æ˜¯ä¸Šç’°ç†Ÿé£Ÿä¸­å¿ƒçš„è€å­—è™Ÿï¼Œé–‹æ¥­è¶…é60å¹´ï¼Œä»¥å…¶ç¨ç‰¹çš„æ¨½ä»”å¥¶èŒ¶èåï¼Œå¥¶èŒ¶æ²–å¥½å¾Œç›´æ¥çŒå…¥ç»ç’ƒç“¶å†·è—ï¼Œå£æ„Ÿçµ²æ»‘æ¿ƒéƒã€‚</p>';
                content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>æ¨½ä»”å¥¶èŒ¶ã€è›‹ç‰›åŒ…ã€è¥¿å¤šå£«</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(8,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(8,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>ç‘è¨˜å’–å•¡æœ€è‘—åçš„é£²å“æ˜¯ä»€éº¼ï¼Ÿ</p>';
                content += '<input type="text" id="answer-8" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(8,\'æ¨½ä»”å¥¶èŒ¶\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(8)">ğŸ’¡ æç¤º (<span id="hint-count-8">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(8)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-8" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-8" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 9) {
                // é¡Œç›®9 - æ°¸è¯é¢å®¶
                content += '<div id="location-9" class="location-card">';
                content += '<h2><span class="location-icon">ğŸœ</span> æ°¸è¯é¢å®¶<span id="dist-9" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>æ°¸è¯é¢å®¶æ˜¯é¦™æ¸¯å°‘æ•¸ä»å …æŒå‚³çµ±ç«¹æ˜‡æ‰“é¢æŠ€è—çš„é¢å®¶ï¼Œå‰µç«‹æ–¼1950å¹´ä»£ï¼Œä»¥å…¶å½ˆç‰™çš„ç«¹æ˜‡é¢å’Œé®®è¦é›²åèåï¼Œæ˜¯é¦™æ¸¯å‚³çµ±ç¾é£Ÿçš„ä»£è¡¨ã€‚</p>';
                content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>é®®è¦é›²åéºµã€ç‰›è…©éºµã€æ¡‘å¯„è›‹èŒ¶</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(9,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(9,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>æ°¸è¯é¢å®¶å …æŒä½¿ç”¨ä»€éº¼å‚³çµ±æŠ€è—è£½ä½œéºµæ¢ï¼Ÿ</p>';
                content += '<input type="text" id="answer-9" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(9,\'ç«¹æ˜‡æ‰“é¢\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(9)">ğŸ’¡ æç¤º (<span id="hint-count-9">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(9)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-9" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-9" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 10) {
                // é¡Œç›®10 - å¤ªå¹³é¤¨é¤å»³
                content += '<div id="location-10" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ—</span> å¤ªå¹³é¤¨é¤å»³<span id="dist-10" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>å¤ªå¹³é¤¨é¤å»³æ˜¯é¦™æ¸¯æœ€æ­·å²æ‚ ä¹…çš„è¥¿é¤å»³ä¹‹ä¸€ï¼Œå‰µç«‹æ–¼1860å¹´ï¼Œä»¥å…¶æ‹›ç‰Œç‘å£«é›ç¿¼å’Œæ‡·èˆŠè¥¿é¤èåï¼Œä¿ç•™äº†é¦™æ¸¯æ®–æ°‘æ™‚æœŸçš„é£²é£Ÿæ–‡åŒ–ã€‚</p>';
                content += '<p><strong>æ‹›ç‰Œç¾é£Ÿï¼š</strong>ç‘å£«é›ç¿¼ã€ç„—è‘¡åœ‹é›ã€æ¢³ä¹å˜</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(10,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(10,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>å¤ªå¹³é¤¨é¤å»³æœ€è‘—åçš„èœå¼æ˜¯ä»€éº¼ï¼Ÿ</p>';
                content += '<input type="text" id="answer-10" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(10,\'ç‘å£«é›ç¿¼\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(10)">ğŸ’¡ æç¤º (<span id="hint-count-10">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(10)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-10" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-10" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            
            document.getElementById('game-content').innerHTML = content;
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswer(locationNum, correctAnswer) {
            var userAnswer = document.getElementById('answer-' + locationNum).value.trim().toLowerCase();
            var correct = correctAnswer.toLowerCase();
            var isCorrect = false;
            
            // åš´æ ¼æ¯”å°é‚è¼¯
            if (userAnswer === correct) {
                isCorrect = true;
            }
            // é‡å°ç‰¹å®šé¡Œç›®çš„å¯¬é¬†æ¯”å°
            if (locationNum === 1 && (userAnswer === 'çµ²è¥ªå¥¶èŒ¶' || userAnswer === 'é´›é´¦')) {
                isCorrect = true;
            }
            if (locationNum === 4 && userAnswer === 'è­šè© éºŸ') {
                isCorrect = true;
            }

            if (isCorrect) {
                document.getElementById('answer-' + locationNum).value = '';
                showPoemThenNext(); // åªæœ‰æ­£ç¢ºæ‰é¡¯ç¤ºè©©å¥
            } else {
                alert('âŒ ç­”æ¡ˆä¸æ­£ç¢ºï¼Œè«‹å†è©¦ä¸€æ¬¡æˆ–æŸ¥çœ‹æç¤ºã€‚');
            }
        }

        // é¡¯ç¤ºæç¤º
        function showHint(locationNum) {
            hintCounters[locationNum]++;
            document.getElementById('hint-count-' + locationNum).textContent = hintCounters[locationNum];
            
            var hints = {
                1: {
                    1: 'æç¤ºï¼šé€™å…©ç¨®é£²å“éƒ½æ˜¯é¦™æ¸¯èŒ¶é¤å»³çš„æ¨™èªŒæ€§é£²å“ã€‚', 
                    2: 'æç¤ºï¼šä¸€ç¨®æ˜¯ç”¨çµ²è¥ªæ²–æ³¡çš„å¥¶èŒ¶ï¼Œå¦ä¸€ç¨®æ˜¯å’–å•¡å’Œå¥¶èŒ¶çš„æ··åˆã€‚', 
                    3: 'ç­”æ¡ˆï¼šçµ²è¥ªå¥¶èŒ¶å’Œé´›é´¦'
                },
                2: {
                    1: 'æç¤ºï¼šé€™æ˜¯ä¸€ç¨®æ—©é¤å¸¸è¦‹çš„èœå¼ã€‚', 
                    2: 'æç¤ºï¼šåŒ…å«ç‚’è›‹å’Œçƒ¤éºµåŒ…ã€‚', 
                    3: 'ç­”æ¡ˆï¼šç‚’è›‹å¤šå£«'
                },
                3: {
                    1: 'æç¤ºï¼šé€™æ˜¯ä¸€ç¨®ç”œå‘³çš„åŒ…é»ã€‚', 
                    2: 'æç¤ºï¼šåŒ…å«å¥¶æ²¹å’Œè±¬ä»”å½¢ç‹€çš„éºµåŒ…ã€‚', 
                    3: 'ç­”æ¡ˆï¼šå¥¶æ²¹è±¬ä»”åŒ…'
                },
                4: {
                    1: 'æç¤ºï¼šé€™ä½åäººåœ¨é¦™æ¸¯æ¨‚å£‡æœ‰å¾ˆé«˜åœ°ä½ã€‚', 
                    2: 'æç¤ºï¼šä»–æ˜¯é¦™æ¸¯æ¨‚å£‡çš„"æ ¡é•·"ã€‚', 
                    3: 'ç­”æ¡ˆï¼šæ ¡é•·'
                },
                5: {
                    1: 'æç¤ºï¼šé€™å€‹åœ°å€ä»¥è³½é¦¬èåã€‚', 
                    2: 'æç¤ºï¼šä½æ–¼é¦™æ¸¯å³¶ï¼Œç£ä»”æ—é‚Šã€‚', 
                    3: 'ç­”æ¡ˆï¼šè·‘é¦¬åœ°'
                },
                6: {
                    1: 'æç¤ºï¼šé€™ç¨®è¨­è¨ˆå…ƒç´ æ˜¯å½©è‰²çš„ã€‚', 
                    2: 'æç¤ºï¼šé€šå¸¸ç”¨æ–¼çª—æˆ¶è£é£¾ã€‚', 
                    3: 'ç­”æ¡ˆï¼šå½©è‰²ç»ç’ƒçª—'
                },
                7: {
                    1: 'æç¤ºï¼šé€™æ˜¯ä¸€ç¨®ç”œå‘³åŒ…é»ã€‚', 
                    2: 'æç¤ºï¼šåŒ…å«è è˜¿å½¢ç‹€çš„é…¥çš®å’Œç‰›æ²¹ã€‚', 
                    3: 'ç­”æ¡ˆï¼šè è˜¿æ²¹'
                },
                8: {
                    1: 'æç¤ºï¼šé€™ç¨®é£²å“ç”¨ç»ç’ƒç“¶ç››è¼‰ã€‚', 
                    2: 'æç¤ºï¼šæ˜¯é¦™æ¸¯ç‰¹è‰²çš„å¥¶èŒ¶ã€‚', 
                    3: 'ç­”æ¡ˆï¼šæ¨½ä»”å¥¶èŒ¶'
                },
                9: {
                    1: 'æç¤ºï¼šé€™æ˜¯ä¸€ç¨®å‚³çµ±è£½éºµæŠ€è—ã€‚', 
                    2: 'æç¤ºï¼šä½¿ç”¨ç«¹ç«¿å£“åˆ¶éºµåœ˜ã€‚', 
                    3: 'ç­”æ¡ˆï¼šç«¹æ˜‡æ‰“é¢'
                },
                10: {
                    1: 'æç¤ºï¼šé€™æ˜¯ä¸€ç¨®é›ç¿¼èœå¼ã€‚', 
                    2: 'æç¤ºï¼šä»¥ç”œé†¬æ²¹çƒ¹èª¿ã€‚', 
                    3: 'ç­”æ¡ˆï¼šç‘å£«é›ç¿¼'
                }
            };
            
            alert(hints[locationNum][Math.min(hintCounters[locationNum], 3)]);
            
            if (hintCounters[locationNum] === 3) {
                setTimeout(function() { 
                    hintCounters[locationNum] = 0; 
                    document.getElementById('hint-count-' + locationNum).textContent = '0'; 
                }, 2000);
            }
        }

        // é¡¯ç¤ºå½±ç‰‡
        function showVideo(locationNum, type) {
            var videoInfo = {
                1: {
                    history: {title: 'è˜­èŠ³åœ’æ­·å²', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'çµ²è¥ªå¥¶èŒ¶å‰µå§‹æ•…äº‹', youtubeId: 'dQw4w9WgXcQ'}
                },
                2: {
                    history: {title: 'æ¾³æ´²ç‰›å¥¶å…¬å¸', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'ç‚’è›‹å¤šå£«å‚³å¥‡', youtubeId: 'dQw4w9WgXcQ'}
                },
                3: {
                    history: {title: 'ç¿ è¯é¤å»³ç™¼å±•å²', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'å¥¶æ²¹è±¬ä»”åŒ…æ•…äº‹', youtubeId: 'dQw4w9WgXcQ'}
                },
                4: {
                    history: {title: 'è¯æ˜Ÿå†°å®¤èˆ‡æ˜æ˜Ÿ', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'æ ¡é•·å¤šå£«ç”±ä¾†', youtubeId: 'dQw4w9WgXcQ'}
                },
                5: {
                    history: {title: 'ç¥¥èˆˆå’–å•¡å®¤', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'å‚³çµ±å†°å®¤æ–‡åŒ–', youtubeId: 'dQw4w9WgXcQ'}
                },
                6: {
                    history: {title: 'ç¾éƒ½é¤å®¤æ‡·èˆŠ', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'é›»å½±å–æ™¯åœ°æ•…äº‹', youtubeId: 'dQw4w9WgXcQ'}
                },
                7: {
                    history: {title: 'é‡‘è¯å†°å»³', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'è è˜¿æ²¹å‚³å¥‡', youtubeId: 'dQw4w9WgXcQ'}
                },
                8: {
                    history: {title: 'ç‘è¨˜å’–å•¡', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'æ¨½ä»”å¥¶èŒ¶ç‰¹è‰²', youtubeId: 'dQw4w9WgXcQ'}
                },
                9: {
                    history: {title: 'æ°¸è¯é¢å®¶', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'ç«¹æ˜‡æ‰“é¢æŠ€è—', youtubeId: 'dQw4w9WgXcQ'}
                },
                10: {
                    history: {title: 'å¤ªå¹³é¤¨é¤å»³', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'ç‘å£«é›ç¿¼ç”±ä¾†', youtubeId: 'dQw4w9WgXcQ'}
                }
            };
            
            var info = videoInfo[locationNum][type];
            document.getElementById('video-title').textContent = info.title;
            document.getElementById('video-description').textContent = info.title;
            document.getElementById('video-player').src = 'https://www.youtube.com/embed/' + info.youtubeId + '?autoplay=1&rel=0';
            document.getElementById('video-modal').style.display = 'flex';
        }

        // é—œé–‰å½±ç‰‡
        function closeVideo() {
            document.getElementById('video-modal').style.display = 'none';
            document.getElementById('video-player').src = '';
        }

        // å®ŒæˆéŠæˆ²
        function completeGame() {
            document.getElementById('game-content').innerHTML = '';
            
            var completionHTML = '<div id="completion" class="completion">';
            completionHTML += '<h2>ğŸ‰ æ­å–œæ‚¨å®Œæˆæ‰€æœ‰æ¢ç´¢ï¼</h2>';
            completionHTML += '<p>æ‚¨å·²æˆåŠŸå®Œæˆé¦™æ¸¯10é–“ç¶“å…¸èŒ¶é¤å»³çš„æ¢ç´¢ï¼</p>';
            completionHTML += '<div class="qr-code">';
            completionHTML += '<h3>å®Œæˆçå‹µäºŒç¶­ç¢¼</h3>';
            completionHTML += '<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=é¦™æ¸¯èŒ¶é¤å»³æ¢ç´¢å®Œæˆ&format=png&margin=0" alt="å®Œæˆçå‹µ">';
            completionHTML += '<p class="qr-instruction">æƒææ­¤äºŒç¶­ç¢¼å¯ç²å¾—æ•¸å­—ä»£ç¢¼</p>';
            completionHTML += '</div>';
            completionHTML += '<div class="selfie-box">';
            completionHTML += '<button class="btn btn-success" onclick="takeSelfie(0)">ğŸ“¸ è‡ªæ‹åˆ†äº«å®Œæˆä»»å‹™</button>';
            completionHTML += '<canvas id="canvas-0" class="selfie-canvas" width="600" height="600"></canvas>';
            completionHTML += '<img id="selfie-0" class="selfie-img" style="display:none;">';
            completionHTML += '</div>';
            completionHTML += '<button class="btn btn-success" onclick="resetGame()">é‡æ–°é–‹å§‹éŠæˆ²</button>';
            completionHTML += '</div>';
            
            document.getElementById('game-content').innerHTML = completionHTML;
            updateProgress();
        }

        // é‡ç½®éŠæˆ²
        function resetGame() {
            currentLocation = 1;
            completedLocations.clear();
            hintCounters = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0};
            loadGameContent();
            updateProgress();
        }

        // åˆå§‹åŒ–
        window.addEventListener('load', function() {
            loadGameContent();
            updateProgress();
        });

        // ç°¡åŒ–çš„è‡ªæ‹åŠŸèƒ½
        function takeSelfie(locationNum) {
            var canvas = document.getElementById('canvas-' + locationNum);
            var ctx = canvas.getContext('2d');
            var img = document.getElementById('selfie-' + locationNum);
            
            // ç¹ªè£½èƒŒæ™¯
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, 600, 600);
            
            // ç¹ªè£½æ–‡å­—
            ctx.fillStyle = '#000000';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            
            var site = locationNum === 0 ? 'é¦™æ¸¯èŒ¶é¤å»³æ¢ç´¢' : getLocationName(locationNum);
            ctx.fillText('æˆ‘å·²å®Œæˆã€' + site + 'ã€‘ä»»å‹™ï¼', 300, 300);
            
            // ç¹ªè£½ç°¡å–®çš„ç›¸æ©Ÿåœ–æ¨™
            ctx.fillStyle = '#333333';
            ctx.fillRect(250, 400, 100, 80);
            ctx.fillStyle = '#cccccc';
            ctx.fillRect(270, 420, 60, 40);
            
            // é¡¯ç¤ºåœ–ç‰‡
            var dataURL = canvas.toDataURL('image/jpeg', 0.9);
            img.src = dataURL;
            img.style.display = 'block';
            
            // æ¨¡æ“¬åˆ†äº«åˆ°WhatsApp
            setTimeout(function() {
                if (confirm('æ˜¯å¦è¦åˆ†äº«åˆ° WhatsAppï¼Ÿ')) {
                    window.open('https://wa.me/?text=' + encodeURIComponent('æˆ‘å·²å®Œæˆã€' + site + 'ã€‘ä»»å‹™ï¼'), '_blank');
                }
            }, 500);
        }

        // ç²å–åœ°é»åç¨±
        function getLocationName(locationNum) {
            var locations = {
                1: 'è˜­èŠ³åœ’',
                2: 'æ¾³æ´²ç‰›å¥¶å…¬å¸',
                3: 'ç¿ è¯é¤å»³',
                4: 'è¯æ˜Ÿå†°å®¤',
                5: 'ç¥¥èˆˆå’–å•¡å®¤',
                6: 'ç¾éƒ½é¤å®¤',
                7: 'é‡‘è¯å†°å»³',
                8: 'ç‘è¨˜å’–å•¡',
                9: 'æ°¸è¯é¢å®¶',
                10: 'å¤ªå¹³é¤¨é¤å»³'
            };
            return locations[locationNum] || 'æœªçŸ¥åœ°é»';
        }

        // ç°¡åŒ–çš„GPSåŠŸèƒ½
        function simulateGPS() {
            var distances = [150, 320, 85, 420, 210, 180, 250, 300, 190, 280];
            
            for (var i = 1; i <= 10; i++) {
                var badge = document.getElementById('dist-' + i);
                if (badge) {
                    badge.textContent = distances[i-1] + ' m';
                    
                    // æ¨¡æ“¬åˆ°é”åœ°é»
                    if (distances[i-1] < 200 && !completedLocations.has(i)) {
                        showGPSPrompt(i);
                    }
                }
            }
        }

        // é¡¯ç¤ºGPSæç¤º
        function showGPSPrompt(poiId) {
            var prompt = document.getElementById('gpsPrompt');
            var poiName = getLocationName(poiId);
            
            document.getElementById('promptPoiName').textContent = poiName;
            prompt.dataset.poiId = poiId;
            prompt.style.display = 'block';
            
            // 5ç§’å¾Œè‡ªå‹•éš±è—
            setTimeout(function() {
                if (prompt.style.display === 'block') {
                    prompt.style.display = 'none';
                }
            }, 5000);
        }

        // é—œé–‰GPSæç¤º
        function closePrompt() {
            document.getElementById('gpsPrompt').style.display = 'none';
        }

        // æ’­æ”¾é¸æ“‡çš„å½±ç‰‡
        function playSelected(type) {
            var poiId = document.getElementById('gpsPrompt').dataset.poiId;
            closePrompt();
            showVideo(poiId, type === 'story' ? 'story' : 'history');
        }

        // åˆå§‹åŒ–GPSæ¨¡æ“¬
        setInterval(simulateGPS, 3000);
    </script>
</body>
</html>
