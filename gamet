<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦™æ¸¯æ­·å²ç‰¹è‰²æ¢ç´¢</title>
    <style>
        /* åŸºæœ¬æ¨£å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            background: linear-gradient(135deg, #e74c3c 0%, #e67e22 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 700px;
            background: #fff;
            color: #333;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.18);
            padding: 1.5rem;
            margin: 1rem;
            position: relative;
        }
        
        h1 {
            text-align: center;
            margin: 0 0 1.5rem 0;
            font-size: 1.75rem;
            background: linear-gradient(45deg, #e74c3c, #e67e22);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .progress-container {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .progress-bar {
            height: 0.5rem;
            background: #e9ecef;
            border-radius: 1rem;
            overflow: hidden;
            margin: 0.5rem 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .location-card {
            background: #f8f9fa;
            padding: 1.25rem;
            border-left: 4px solid #e74c3c;
            border-radius: 8px;
            margin-bottom: 1rem;
            transition: transform 0.3s ease;
        }
        
        .location-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .location-card h2 {
            font-size: 1.25rem;
            margin-bottom: 0.75rem;
            color: #2c3e50;
            display: flex;
            align-items: center;
        }
        
        .distance-badge {
            background: #e7f3ff;
            color: #004085;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }
        
        .btn {
            background: #e74c3c;
            color: #fff;
            border: none;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            margin: 0.25rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn:hover {
            background: #c0392b;
            transform: translateY(-1px);
        }
        
        .btn-success {
            background: #27ae60;
        }
        
        .btn-warning {
            background: #f39c12;
            color: #000;
        }
        
        .btn-danger {
            background: #c0392b;
        }
        
        .btn-info {
            background: #3498db;
        }
        
        input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.875rem;
            margin: 0.5rem 0;
            transition: border-color 0.3s;
        }
        
        input:focus {
            border-color: #e74c3c;
            outline: none;
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            margin: 0.75rem 0;
        }
        
        .selfie-box {
            text-align: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px dashed #ddd;
        }
        
        .selfie-canvas {
            display: none;
        }
        
        .selfie-img {
            max-width: 100%;
            margin-top: 0.5rem;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .completion {
            text-align: center;
            padding: 1.5rem;
        }
        
        .qr-code {
            margin: 1.5rem 0;
        }
        
        .qr-code img {
            max-width: 200px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 1rem;
        }
        
        .modal-content {
            background: #fff;
            border-radius: 12px;
            padding: 1.5rem;
            max-width: 560px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal h2 {
            margin-bottom: 1rem;
            color: #2c3e50;
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #fff;
            cursor: pointer;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
        }
        
        .poem-mask {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 1.25rem;
            text-align: center;
            padding: 2rem;
            z-index: 9999;
            line-height: 1.8;
        }
        
        .poem-content {
            max-width: 500px;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }
        
        .gps-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            color: #333;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
            z-index: 9999;
            display: none;
            font-size: 0.875rem;
            max-width: 90%;
            width: 400px;
        }
        
        .gps-prompt button {
            margin: 0 4px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .location-card {
                padding: 1rem;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                margin: 0.25rem 0;
            }
            
            .poem-mask {
                font-size: 1.1rem;
                padding: 1rem;
            }
        }
        
        /* ä¿è­·æ¨£å¼ */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        .no-context {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* æµ®æ°´å° */
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 4rem;
            color: rgba(255, 255, 255, 0.03);
            z-index: -1;
            pointer-events: none;
            white-space: nowrap;
            font-weight: bold;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 0.25rem;
            font-size: 0.75rem;
            color: #666;
        }
        
        .location-icon {
            margin-right: 8px;
            font-size: 1.2em;
        }
    </style>
</head>
<body class="no-select no-context" oncontextmenu="return false;">
    <div class="watermark">é¦™æ¸¯æ­·å²ç‰¹è‰²æ¢ç´¢</div>
    
    <div class="container">
        <h1>ğŸ™ï¸ é¦™æ¸¯æ­·å²ç‰¹è‰²æ¢ç´¢</h1>
        
        <div class="progress-container">
            <div>æ¢ç´¢é€²åº¦ï¼š<span id="progress-count">0</span> / 10</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text">
                <span>å·²å®Œæˆï¼š<span id="progress-percent">0</span>%</span>
                <span>å‰©é¤˜ï¼š<span id="remaining-percent">100</span>%</span>
            </div>
        </div>

        <!-- å…§å®¹å°‡ç”±JavaScriptå‹•æ…‹è¼‰å…¥ -->
        <div id="game-content"></div>
    </div>

    <!-- å½±ç‰‡æ¨¡æ…‹æ¡† -->
    <div id="video-modal" class="modal" style="display:none;">
        <button class="modal-close" onclick="closeVideo()">&times;</button>
        <div class="modal-content">
            <h2 id="video-title">å½±ç‰‡æ¨™é¡Œ</h2>
            <p id="video-description">å½±ç‰‡æè¿°</p>
            <div class="video-container">
                <iframe id="video-player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <p style="font-size:0.75rem;color:#555;margin-top:0.5rem;">åœ¨ARç‰ˆæœ¬ä¸­ï¼Œé€™æ®µå½±ç‰‡æœƒåœ¨æ‚¨åˆ°é”åœ°é»æ™‚è‡ªå‹•æ’­æ”¾ï¼Œä¸¦èˆ‡å¯¦æ™¯çµåˆ</p>
        </div>
    </div>

    <!-- GPS æç¤º -->
    <div id="gpsPrompt" class="gps-prompt">
        <div>ğŸ“ ä½ å·²åˆ°é” <strong id="promptPoiName"></strong>ï¼</div>
        <div style="margin-top:8px">
            <button class="btn btn-info" onclick="playSelected('story')">æ’­æ”¾æ•…äº‹é€²åº¦</button>
            <button class="btn btn-danger" onclick="playSelected('hist')">æ’­æ”¾æ­·å²ç‰‡æ®µ</button>
            <button class="btn" onclick="closePrompt()">ç¨å¾Œå†èªª</button>
        </div>
    </div>

    <script>
        // ä»£ç¢¼ä¿è­·æªæ–½
        (function() {
            'use strict';
            
            // ç¦ç”¨å³éµèœå–®
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            // ç¦ç”¨æ–‡æœ¬é¸æ“‡
            document.addEventListener('selectstart', function(e) {
                e.preventDefault();
                return false;
            });
            
            // ç¦ç”¨æ‹–æ‹½
            document.addEventListener('dragstart', function(e) {
                e.preventDefault();
                return false;
            });
            
            // ç¦ç”¨è¤‡è£½ã€å‰ªåˆ‡ã€ç²˜è²¼
            document.addEventListener('copy', function(e) {
                e.preventDefault();
                return false;
            });
            
            document.addEventListener('cut', function(e) {
                e.preventDefault();
                return false;
            });
            
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                return false;
            });
            
            // æª¢æ¸¬é–‹ç™¼è€…å·¥å…·
            function detectDevTools() {
                var threshold = 160;
                var widthThreshold = window.outerWidth - window.innerWidth > threshold;
                var heightThreshold = window.outerHeight - window.innerHeight > threshold;
                
                if (widthThreshold || heightThreshold) {
                    document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;background:#333;color:white;font-size:24px;">ğŸš« ç¦æ­¢ä½¿ç”¨é–‹ç™¼è€…å·¥å…·</div>';
                }
            }
            
            setInterval(detectDevTools, 1000);
            
            // åœ¨æ§åˆ¶å°é¡¯ç¤ºè­¦å‘Š
            console.log('%cğŸš« è«‹å‹¿è¤‡è£½æ­¤ä»£ç¢¼', 'color: red; font-size: 20px; font-weight: bold;');
            console.log('%cæ­¤æ‡‰ç”¨ç¨‹å¼ä»£ç¢¼å—ç‰ˆæ¬Šä¿è­·', 'color: orange; font-size: 16px;');
        })();

        // éŠæˆ²ç‹€æ…‹
        var currentLocation = 1;
        var totalLocations = 10;
        var hintCounters = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0};
        var completedLocations = new Set();

        // ä¸‹ä¸€åœ°é»è©©æ„æç¤º
        var nextPoem = {
            2: 'å¾ä¹é¾å¯¨åŸçš„å‚³å¥‡ï¼Œèµ°é€²ä¸­ç’°çš„ç¹è¯ï¼Œä¸‹ä¸€ç«™å°‡å¸¶ä½ æ„Ÿå—é¦™æ¸¯çš„é‡‘èè„ˆæã€‚',
            3: 'é‡‘èä¸­å¿ƒä¹‹å¾Œï¼Œè®“æˆ‘å€‘å‰å¾€é¦™æ¸¯çš„å¿ƒè‡Ÿåœ°å¸¶ï¼Œæ„Ÿå—æ®–æ°‘æ™‚æœŸçš„æ­·å²ç—•è·¡ã€‚',
            4: 'å¾æ­·å²å»ºç¯‰èµ°å‘å‚³çµ±æ–‡åŒ–ï¼Œä¸‹ä¸€ç«™å°‡å¸¶ä½ é«”é©—é¦™æ¸¯çš„ä¿¡ä»°ä¸­å¿ƒã€‚',
            5: 'ä¿¡ä»°ä¹‹æ—…å¾Œï¼Œè®“æˆ‘å€‘å‰å¾€é¦™æ¸¯æœ€å¤è€çš„è¡—é“ï¼Œæ„Ÿå—æ­²æœˆçš„ç—•è·¡ã€‚',
            6: 'å¾å¤è€è¡—é“èµ°å‘è—è¡“æ®¿å ‚ï¼Œä¸‹ä¸€ç«™å°‡å¸¶ä½ æ¬£è³é¦™æ¸¯çš„æ–‡åŒ–ç‘°å¯¶ã€‚',
            7: 'æ–‡åŒ–æ´—ç¦®å¾Œï¼Œè®“æˆ‘å€‘ç™»ä¸Šå¤ªå¹³å±±é ‚ï¼Œä¿¯ç°ç¶­æ¸¯çš„ç’€ç’¨å¤œæ™¯ã€‚',
            8: 'å¾å±±é ‚ä¿¯ç°ï¼Œèµ°å‘æµ·æ¿±æ¼«æ­¥ï¼Œä¸‹ä¸€ç«™å°‡å¸¶ä½ æ„Ÿå—é¦™æ¸¯çš„è‡ªç„¶èˆ‡ä¼‘é–’ã€‚',
            9: 'æµ·æ¿±æ¼«æ­¥å¾Œï¼Œè®“æˆ‘å€‘èµ°é€²é¦™æ¸¯çš„å‚³çµ±å¸‚å ´ï¼Œé«”é©—åœ°é“ç”Ÿæ´»ã€‚',
            10: 'å¾å¸‚äº•ç”Ÿæ´»èµ°å‘ç¾ä»£å¥‡è§€ï¼Œæœ€å¾Œä¸€ç«™å°‡å¸¶ä½ è¦‹è­‰é¦™æ¸¯çš„å»ºç¯‰å¥‡è¹Ÿã€‚'
        };

        // å‹•æ…‹è¼‰å…¥éŠæˆ²å…§å®¹
        function loadGameContent() {
            var content = '';
            
            // é¡Œç›®1 - ä¹é¾å¯¨åŸå…¬åœ’
            content += '<div id="location-1" class="location-card">';
            content += '<h2><span class="location-icon">ğŸ¯</span> ä¹é¾å¯¨åŸå…¬åœ’<span id="dist-1" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
            content += '<p><strong>æ•…äº‹ï¼š</strong>é€™è£¡æ›¾æ˜¯å……æ»¿å‚³å¥‡çš„ä¹é¾å¯¨åŸï¼Œä¸€å€‹åœ¨ä¸‰ä¸ç®¡åœ°å¸¶ä¸­è‡ªç„¶å½¢æˆçš„ç¨ç‰¹ç¤¾å€ï¼Œ1994å¹´æ‹†é™¤å¾Œæ”¹å»ºç‚ºå…¬åœ’ã€‚</p>';
            content += '<div class="button-group">';
            content += '<button class="btn btn-danger" onclick="showVideo(1,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
            content += '<button class="btn btn-info" onclick="showVideo(1,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
            content += '</div>';
            content += '<p><strong>å•é¡Œï¼š</strong>ä¹é¾å¯¨åŸå…¬åœ’ä¿ç•™äº†æ¸…ä»£è¡™é–€çš„å“ªå€‹é‡è¦å»ºç¯‰çµæ§‹ï¼Ÿ</p>';
            content += '<input type="text" id="answer-1" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
            content += '<div class="button-group">';
            content += '<button class="btn" onclick="checkAnswer(1,\'è¡™é–€\')">æäº¤ç­”æ¡ˆ</button>';
            content += '<button class="btn btn-warning" onclick="showHint(1)">ğŸ’¡ æç¤º (<span id="hint-count-1">0</span>/3)</button>';
            content += '</div>';
            content += '<div class="selfie-box">';
            content += '<button class="btn btn-success" onclick="takeSelfie(1)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
            content += '<canvas id="canvas-1" class="selfie-canvas" width="600" height="600"></canvas>';
            content += '<img id="selfie-1" class="selfie-img" style="display:none;">';
            content += '</div>';
            content += '</div>';
            
            document.getElementById('game-content').innerHTML = content;
        }

        // æ›´æ–°é€²åº¦æ¢
        function updateProgress() {
            var completed = completedLocations.size;
            var pc = Math.min((completed / totalLocations) * 100, 100);
            
            document.getElementById('progress-count').textContent = completed;
            document.getElementById('progress-percent').textContent = Math.round(pc);
            document.getElementById('remaining-percent').textContent = Math.round(100 - pc);
            document.getElementById('progress-fill').style.width = pc + '%';
        }

        // é¡¯ç¤ºè©©æ„æç¤ºä¸¦å‰å¾€ä¸‹ä¸€åœ°é»
        function showPoemThenNext() {
            document.getElementById('location-' + currentLocation).style.display = 'none';
            completedLocations.add(currentLocation);
            updateProgress();
            
            var wrap = document.createElement('div');
            wrap.id = 'poem-mask';
            wrap.className = 'poem-mask';
            wrap.innerHTML = 
                '<div class="poem-content">' +
                    '<p>' + (nextPoem[currentLocation + 1] || 'æ­å–œæ‚¨å®Œæˆæ‰€æœ‰æ¢ç´¢ï¼') + '</p>' +
                    '<button class="btn btn-success" onclick="goNextLocation()">æ¢ç´¢ä¸‹å€‹åœ°é»</button>' +
                '</div>';
            document.body.appendChild(wrap);
        }

        // å‰å¾€ä¸‹ä¸€åœ°é»
        function goNextLocation() {
            var mask = document.getElementById('poem-mask');
            if (mask) mask.remove();
            
            currentLocation++;
            
            if (currentLocation <= totalLocations) {
                // å‹•æ…‹è¼‰å…¥ä¸‹ä¸€å€‹åœ°é»
                loadLocation(currentLocation);
            } else {
                completeGame();
            }
        }

        // å‹•æ…‹è¼‰å…¥åœ°é»
        function loadLocation(locationNum) {
            var content = '';
            
            if (locationNum === 2) {
                // é¡Œç›®2 - ä¸­ç’°
                content += '<div id="location-2" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ¢</span> ä¸­ç’°é‡‘èå€<span id="dist-2" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>ä¸­ç’°æ˜¯é¦™æ¸¯çš„å•†æ¥­èˆ‡é‡‘èä¸­å¿ƒï¼ŒåŒ¯èšäº†åœ‹éš›é‡‘èæ©Ÿæ§‹ã€é«˜ç´šå“ç‰Œèˆ‡æ­·å²å»ºç¯‰ï¼Œè¦‹è­‰é¦™æ¸¯å¾æ¼æ‘åˆ°åœ‹éš›éƒ½æœƒçš„è½‰è®Šã€‚</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(2,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(2,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>ä¸­ç’°çš„æ¨™èªŒæ€§å»ºç¯‰ä¸­éŠ€å¤§å»ˆæ˜¯ç”±å“ªä½è‘—åå»ºç¯‰å¸«è¨­è¨ˆçš„ï¼Ÿ</p>';
                content += '<input type="text" id="answer-2" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(2,\'è²è¿éŠ˜\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(2)">ğŸ’¡ æç¤º (<span id="hint-count-2">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(2)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-2" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-2" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 3) {
                // é¡Œç›®3 - é¦™æ¸¯ç¦®è³“åºœ
                content += '<div id="location-3" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ›ï¸</span> é¦™æ¸¯ç¦®è³“åºœ<span id="dist-3" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>ç¦®è³“åºœå»ºæ–¼1855å¹´ï¼Œæ›¾æ˜¯28ä½é¦™æ¸¯ç¸½ç£çš„å®˜é‚¸ï¼Œç¾ç‚ºé¦™æ¸¯ç‰¹åˆ¥è¡Œæ”¿å€è¡Œæ”¿é•·å®˜çš„å®˜é‚¸ï¼Œè¦‹è­‰é¦™æ¸¯150å¤šå¹´çš„æ­·å²è®Šé·ã€‚</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(3,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(3,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>ç¦®è³“åºœæœ€åˆæ˜¯ç‚ºå“ªä½é¦™æ¸¯ç¸½ç£å»ºé€ çš„å®˜é‚¸ï¼Ÿ</p>';
                content += '<input type="text" id="answer-3" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(3,\'å¯¶å¯§\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(3)">ğŸ’¡ æç¤º (<span id="hint-count-3">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(3)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-3" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-3" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 4) {
                // é¡Œç›®4 - é»ƒå¤§ä»™ç¥ 
                content += '<div id="location-4" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ™</span> é»ƒå¤§ä»™ç¥ <span id="dist-4" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>é»ƒå¤§ä»™ç¥ æ˜¯é¦™æ¸¯æœ€è‘—åçš„å»Ÿå®‡ä¹‹ä¸€ï¼Œå»ºæ–¼1921å¹´ï¼Œä¾›å¥‰é“æ•™ç¥ä»™é»ƒåˆå¹³ï¼Œä»¥ã€Œæœ‰æ±‚å¿…æ‡‰ã€èåï¼Œæ˜¯é¦™æ¸¯é‡è¦çš„ä¿¡ä»°ä¸­å¿ƒã€‚</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(4,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(4,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>é»ƒå¤§ä»™ç¥ ä¸»è¦ä¾›å¥‰å“ªä½é“æ•™ç¥ä»™ï¼Ÿ</p>';
                content += '<input type="text" id="answer-4" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(4,\'é»ƒåˆå¹³\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(4)">ğŸ’¡ æç¤º (<span id="hint-count-4">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(4)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-4" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-4" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 5) {
                // é¡Œç›®5 - çŸ³æ¿è¡—
                content += '<div id="location-5" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ›¤ï¸</span> çŸ³æ¿è¡—ï¼ˆç µå…¸ä¹è¡—ï¼‰<span id="dist-5" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>çŸ³æ¿è¡—æ˜¯é¦™æ¸¯æœ€å¤è€çš„è¡—é“ä¹‹ä¸€ï¼Œå»ºæ–¼1845å¹´ï¼Œä»¥é¦™æ¸¯é¦–ä»»ç¸½ç£ç µå…¸ä¹çˆµå£«å‘½åï¼ŒçŸ³æ¿è·¯é¢èˆ‡éµçš®æ”¤æª”è¦‹è­‰é¦™æ¸¯é–‹åŸ åˆæœŸçš„æ­·å²ã€‚</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(5,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(5,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>çŸ³æ¿è¡—çš„æ­£å¼åç¨±æ˜¯ä»¥å“ªä½é¦™æ¸¯ç¸½ç£å‘½åï¼Ÿ</p>';
                content += '<input type="text" id="answer-5" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(5,\'ç µå…¸ä¹\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(5)">ğŸ’¡ æç¤º (<span id="hint-count-5">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(5)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-5" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-5" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 6) {
                // é¡Œç›®6 - é¦™æ¸¯æ–‡åŒ–ä¸­å¿ƒ
                content += '<div id="location-6" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ­</span> é¦™æ¸¯æ–‡åŒ–ä¸­å¿ƒ<span id="dist-6" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>é¦™æ¸¯æ–‡åŒ–ä¸­å¿ƒæ–¼1989å¹´å•Ÿç”¨ï¼Œæ˜¯é¦™æ¸¯é‡è¦çš„è¡¨æ¼”è—è¡“å ´åœ°ï¼Œç¨ç‰¹çš„å»ºç¯‰è¨­è¨ˆèˆ‡å°–æ²™å’€æµ·æ¿±ä½ç½®ä½¿å…¶æˆç‚ºé¦™æ¸¯æ–‡åŒ–åœ°æ¨™ã€‚</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(6,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(6,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>é¦™æ¸¯æ–‡åŒ–ä¸­å¿ƒçš„å‰èº«æ˜¯ä»€éº¼å»ºç¯‰ï¼Ÿ</p>';
                content += '<input type="text" id="answer-6" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(6,\'ä¹å»£éµè·¯é˜æ¨“\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(6)">ğŸ’¡ æç¤º (<span id="hint-count-6">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(6)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-6" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-6" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 7) {
                // é¡Œç›®7 - å¤ªå¹³å±±é ‚
                content += '<div id="location-7" class="location-card">';
                content += '<h2><span class="location-icon">â›°ï¸</span> å¤ªå¹³å±±é ‚<span id="dist-7" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>å¤ªå¹³å±±é ‚æ˜¯é¦™æ¸¯å³¶æœ€é«˜é»ï¼Œè‡ª19ä¸–ç´€èµ·ä¾¿æ˜¯å¯Œè±ªèˆ‡å¤–ç±äººå£«çš„ä½å®…å€ï¼Œå±±é ‚çºœè»Šèˆ‡å‡Œéœ„é–£è®“éŠå®¢å¯ä¿¯ç°ç¶­å¤šåˆ©äºæ¸¯èˆ‡é¦™æ¸¯å…¨æ™¯ã€‚</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(7,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(7,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>å¤ªå¹³å±±é ‚çºœè»Šæ–¼å“ªä¸€å¹´é–‹å§‹ç‡Ÿé‹ï¼Ÿ</p>';
                content += '<input type="text" id="answer-7" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(7,\'1888\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(7)">ğŸ’¡ æç¤º (<span id="hint-count-7">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(7)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-7" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-7" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 8) {
                // é¡Œç›®8 - æ˜Ÿå…‰å¤§é“
                content += '<div id="location-8" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ¬</span> æ˜Ÿå…‰å¤§é“<span id="dist-8" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>æ˜Ÿå…‰å¤§é“æ–¼2004å¹´é–‹å¹•ï¼Œæ—¨åœ¨è¡¨æšé¦™æ¸¯é›»å½±æ¥­ç•Œçš„å‚‘å‡ºäººå£«ï¼Œä»¿æ•ˆå¥½èŠå¡¢æ˜Ÿå…‰å¤§é“ï¼Œå±•ç¤ºæ˜æ˜Ÿæ‰‹å°èˆ‡é›•åƒï¼Œæ˜¯é¦™æ¸¯é›»å½±æ–‡åŒ–çš„è±¡å¾µã€‚</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(8,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(8,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>æ˜Ÿå…‰å¤§é“ä¸Šå“ªä½æ­¦æ‰“æ˜æ˜Ÿçš„éŠ…åƒæœ€ç‚ºè‘—åï¼Ÿ</p>';
                content += '<input type="text" id="answer-8" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(8,\'æå°é¾\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(8)">ğŸ’¡ æç¤º (<span id="hint-count-8">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(8)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-8" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-8" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 9) {
                // é¡Œç›®9 - å»Ÿè¡—å¤œå¸‚
                content += '<div id="location-9" class="location-card">';
                content += '<h2><span class="location-icon">ğŸŒƒ</span> å»Ÿè¡—å¤œå¸‚<span id="dist-9" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>å»Ÿè¡—å¤œå¸‚æ˜¯é¦™æ¸¯æœ€å…·ç‰¹è‰²çš„å¤œå¸‚ä¹‹ä¸€ï¼Œå› è¡—æ—çš„æ¦•æ¨¹é ­å¤©åå»Ÿè€Œå¾—åï¼Œä»¥å¹³æ°‘ç¾é£Ÿã€ç®—å‘½æ”¤æª”èˆ‡å°å•†å“èåï¼Œè¢«ç¨±ç‚ºã€Œå¹³æ°‘å¤œç¸½æœƒã€ã€‚</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(9,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(9,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>å»Ÿè¡—å¤œå¸‚å› è¡—æ—çš„ä»€éº¼å»Ÿå®‡è€Œå¾—åï¼Ÿ</p>';
                content += '<input type="text" id="answer-9" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(9,\'å¤©åå»Ÿ\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(9)">ğŸ’¡ æç¤º (<span id="hint-count-9">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(9)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-9" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-9" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            else if (locationNum === 10) {
                // é¡Œç›®10 - åœ‹éš›é‡‘èä¸­å¿ƒ
                content += '<div id="location-10" class="location-card">';
                content += '<h2><span class="location-icon">ğŸ¦</span> åœ‹éš›é‡‘èä¸­å¿ƒï¼ˆIFCï¼‰<span id="dist-10" class="distance-badge">è¨ˆç®—ä¸­â€¦</span></h2>';
                content += '<p><strong>æ•…äº‹ï¼š</strong>åœ‹éš›é‡‘èä¸­å¿ƒæ˜¯é¦™æ¸¯æ¨™èªŒæ€§æ‘©å¤©å¤§æ¨“ï¼ŒäºŒæœŸé«˜415.8ç±³ï¼Œæ›¾æ˜¯é¦™æ¸¯æœ€é«˜å»ºç¯‰ï¼Œè±¡å¾µé¦™æ¸¯ä½œç‚ºåœ‹éš›é‡‘èä¸­å¿ƒçš„åœ°ä½ï¼Œå…§æœ‰é«˜ç´šå•†å ´ã€è¾¦å…¬å®¤èˆ‡å››å­£é…’åº—ã€‚</p>';
                content += '<div class="button-group">';
                content += '<button class="btn btn-danger" onclick="showVideo(10,\'history\')">ğŸ¬ æ­·å²å½±ç‰‡</button>';
                content += '<button class="btn btn-info" onclick="showVideo(10,\'story\')">ğŸ“– æ•…äº‹é€²åº¦</button>';
                content += '</div>';
                content += '<p><strong>å•é¡Œï¼š</strong>åœ‹éš›é‡‘èä¸­å¿ƒäºŒæœŸæ–¼å“ªä¸€å¹´è½æˆï¼Ÿ</p>';
                content += '<input type="text" id="answer-10" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">';
                content += '<div class="button-group">';
                content += '<button class="btn" onclick="checkAnswer(10,\'2003\')">æäº¤ç­”æ¡ˆ</button>';
                content += '<button class="btn btn-warning" onclick="showHint(10)">ğŸ’¡ æç¤º (<span id="hint-count-10">0</span>/3)</button>';
                content += '</div>';
                content += '<div class="selfie-box">';
                content += '<button class="btn btn-success" onclick="takeSelfie(10)">ğŸ“¸ è‡ªæ‹åˆ†äº«</button>';
                content += '<canvas id="canvas-10" class="selfie-canvas" width="600" height="600"></canvas>';
                content += '<img id="selfie-10" class="selfie-img" style="display:none;">';
                content += '</div>';
                content += '</div>';
            }
            
            document.getElementById('game-content').innerHTML = content;
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswer(locationNum, correctAnswer) {
            var userAnswer = document.getElementById('answer-' + locationNum).value.trim().toLowerCase();
            var correct = correctAnswer.toLowerCase();
            var isCorrect = false;
            
            // åš´æ ¼æ¯”å°é‚è¼¯
            if (userAnswer === correct) {
                isCorrect = true;
            }
            // é‡å°ç‰¹å®šé¡Œç›®çš„å¯¬é¬†æ¯”å°
            if (locationNum === 2 && userAnswer === 'è²è¿éŠ˜') {
                isCorrect = true;
            }
            if (locationNum === 6 && (userAnswer === 'ä¹å»£éµè·¯é˜æ¨“' || userAnswer === 'é˜æ¨“')) {
                isCorrect = true;
            }

            if (isCorrect) {
                document.getElementById('answer-' + locationNum).value = '';
                showPoemThenNext(); // åªæœ‰æ­£ç¢ºæ‰é¡¯ç¤ºè©©å¥
            } else {
                alert('âŒ ç­”æ¡ˆä¸æ­£ç¢ºï¼Œè«‹å†è©¦ä¸€æ¬¡æˆ–æŸ¥çœ‹æç¤ºã€‚');
            }
        }

        // é¡¯ç¤ºæç¤º
        function showHint(locationNum) {
            hintCounters[locationNum]++;
            document.getElementById('hint-count-' + locationNum).textContent = hintCounters[locationNum];
            
            var hints = {
                1: {
                    1: 'æç¤ºï¼šç­”æ¡ˆå°±åœ¨å•é¡Œä¸­ï¼ç•™æ„ã€Œè¡™é–€ã€é€™å€‹è©ã€‚', 
                    2: 'æç¤ºï¼šæ¸…ä»£è¡™é–€çš„é‡è¦å»ºç¯‰çµæ§‹å°±æ˜¯ã€Œè¡™é–€ã€æœ¬èº«ã€‚', 
                    3: 'ç­”æ¡ˆï¼šè¡™é–€'
                },
                2: {
                    1: 'æç¤ºï¼šé€™ä½å»ºç¯‰å¸«ä¹Ÿè¨­è¨ˆäº†å·´é»ç¾…æµ®å®®ç»ç’ƒé‡‘å­—å¡”ã€‚', 
                    2: 'æç¤ºï¼šä»–æ˜¯ç¾ç±è¯è£”å»ºç¯‰å¸«ï¼Œå§“è²ã€‚', 
                    3: 'ç­”æ¡ˆï¼šè²è¿éŠ˜'
                },
                3: {
                    1: 'æç¤ºï¼šé€™ä½ç¸½ç£çš„ä¸­æ–‡åå­—æœ‰å…©å€‹å­—ã€‚', 
                    2: 'æç¤ºï¼šä»–æ˜¯é¦™æ¸¯ç¬¬å››ä»»ç¸½ç£ã€‚', 
                    3: 'ç­”æ¡ˆï¼šå¯¶å¯§'
                },
                4: {
                    1: 'æç¤ºï¼šé€™ä½ç¥ä»™çš„åå­—æœ‰ä¸‰å€‹å­—ã€‚', 
                    2: 'æç¤ºï¼šä»–æ˜¯ä¸€ä½é“æ•™ç¥ä»™ï¼Œå§“é»ƒã€‚', 
                    3: 'ç­”æ¡ˆï¼šé»ƒåˆå¹³'
                },
                5: {
                    1: 'æç¤ºï¼šé€™ä½ç¸½ç£çš„ä¸­æ–‡åå­—æœ‰ä¸‰å€‹å­—ã€‚', 
                    2: 'æç¤ºï¼šä»–æ˜¯é¦™æ¸¯é¦–ä»»ç¸½ç£ã€‚', 
                    3: 'ç­”æ¡ˆï¼šç µå…¸ä¹'
                },
                6: {
                    1: 'æç¤ºï¼šé€™å€‹å»ºç¯‰èˆ‡éµè·¯æœ‰é—œã€‚', 
                    2: 'æç¤ºï¼šå®ƒæ˜¯ä¸€å€‹é˜æ¨“å»ºç¯‰ã€‚', 
                    3: 'ç­”æ¡ˆï¼šä¹å»£éµè·¯é˜æ¨“'
                },
                7: {
                    1: 'æç¤ºï¼šé€™æ˜¯ä¸€å€‹å››ä½æ•¸å­—çš„å¹´ä»½ã€‚', 
                    2: 'æç¤ºï¼šé€™å€‹å¹´ä»½åœ¨19ä¸–ç´€ã€‚', 
                    3: 'ç­”æ¡ˆï¼š1888'
                },
                8: {
                    1: 'æç¤ºï¼šé€™ä½æ˜æ˜Ÿæ˜¯åŠŸå¤«é›»å½±çš„å‚³å¥‡äººç‰©ã€‚', 
                    2: 'æç¤ºï¼šä»–çš„è‹±æ–‡åå­—æ˜¯Bruce Leeã€‚', 
                    3: 'ç­”æ¡ˆï¼šæå°é¾'
                },
                9: {
                    1: 'æç¤ºï¼šé€™æ˜¯ä¸€åº§ä¾›å¥‰æµ·ç¥çš„å»Ÿå®‡ã€‚', 
                    2: 'æç¤ºï¼šé€™åº§å»Ÿå®‡ä¾›å¥‰çš„æ˜¯åª½ç¥–ã€‚', 
                    3: 'ç­”æ¡ˆï¼šå¤©åå»Ÿ'
                },
                10: {
                    1: 'æç¤ºï¼šé€™æ˜¯ä¸€å€‹å››ä½æ•¸å­—çš„å¹´ä»½ã€‚', 
                    2: 'æç¤ºï¼šé€™å€‹å¹´ä»½åœ¨21ä¸–ç´€åˆã€‚', 
                    3: 'ç­”æ¡ˆï¼š2003'
                }
            };
            
            alert(hints[locationNum][Math.min(hintCounters[locationNum], 3)]);
            
            if (hintCounters[locationNum] === 3) {
                setTimeout(function() { 
                    hintCounters[locationNum] = 0; 
                    document.getElementById('hint-count-' + locationNum).textContent = '0'; 
                }, 2000);
            }
        }

        // é¡¯ç¤ºå½±ç‰‡
        function showVideo(locationNum, type) {
            var videoInfo = {
                1: {
                    history: {title: 'ä¹é¾å¯¨åŸæ­·å²', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'ä¹é¾å¯¨åŸæ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                },
                2: {
                    history: {title: 'ä¸­ç’°é‡‘èå€ç™¼å±•', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'ä¸­ç’°æ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                },
                3: {
                    history: {title: 'ç¦®è³“åºœæ­·å²', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'ç¦®è³“åºœæ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                },
                4: {
                    history: {title: 'é»ƒå¤§ä»™ç¥ æ–‡åŒ–', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'é»ƒå¤§ä»™ç¥ æ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                },
                5: {
                    history: {title: 'çŸ³æ¿è¡—æ­·å²', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'çŸ³æ¿è¡—æ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                },
                6: {
                    history: {title: 'é¦™æ¸¯æ–‡åŒ–ä¸­å¿ƒ', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'æ–‡åŒ–ä¸­å¿ƒæ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                },
                7: {
                    history: {title: 'å¤ªå¹³å±±é ‚æ­·å²', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'å¤ªå¹³å±±é ‚æ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                },
                8: {
                    history: {title: 'æ˜Ÿå…‰å¤§é“èˆ‡é¦™æ¸¯é›»å½±', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'æ˜Ÿå…‰å¤§é“æ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                },
                9: {
                    history: {title: 'å»Ÿè¡—å¤œå¸‚æ–‡åŒ–', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'å»Ÿè¡—å¤œå¸‚æ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                },
                10: {
                    history: {title: 'åœ‹éš›é‡‘èä¸­å¿ƒ', youtubeId: 'dQw4w9WgXcQ'}, 
                    story: {title: 'IFCæ•…äº‹é€²åº¦', youtubeId: 'dQw4w9WgXcQ'}
                }
            };
            
            var info = videoInfo[locationNum][type];
            document.getElementById('video-title').textContent = info.title;
            document.getElementById('video-description').textContent = info.title;
            document.getElementById('video-player').src = 'https://www.youtube.com/embed/' + info.youtubeId + '?autoplay=1&rel=0';
            document.getElementById('video-modal').style.display = 'flex';
        }

        // é—œé–‰å½±ç‰‡
        function closeVideo() {
            document.getElementById('video-modal').style.display = 'none';
            document.getElementById('video-player').src = '';
        }

        // å®ŒæˆéŠæˆ²
        function completeGame() {
            document.getElementById('game-content').innerHTML = '';
            
            var completionHTML = '<div id="completion" class="completion">';
            completionHTML += '<h2>ğŸ‰ æ­å–œæ‚¨å®Œæˆæ‰€æœ‰æ¢ç´¢ï¼</h2>';
            completionHTML += '<p>æ‚¨å·²æˆåŠŸå®Œæˆé¦™æ¸¯10å€‹æ­·å²èˆ‡ç‰¹è‰²åœ°é»çš„æ¢ç´¢ï¼</p>';
            completionHTML += '<div class="qr-code">';
            completionHTML += '<h3>å®Œæˆçå‹µäºŒç¶­ç¢¼</h3>';
            completionHTML += '<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=é¦™æ¸¯æ­·å²ç‰¹è‰²æ¢ç´¢å®Œæˆ&format=png&margin=0" alt="å®Œæˆçå‹µ">';
            completionHTML += '<p class="qr-instruction">æƒææ­¤äºŒç¶­ç¢¼å¯ç²å¾—æ•¸å­—ä»£ç¢¼</p>';
            completionHTML += '</div>';
            completionHTML += '<div class="selfie-box">';
            completionHTML += '<button class="btn btn-success" onclick="takeSelfie(0)">ğŸ“¸ è‡ªæ‹åˆ†äº«å®Œæˆä»»å‹™</button>';
            completionHTML += '<canvas id="canvas-0" class="selfie-canvas" width="600" height="600"></canvas>';
            completionHTML += '<img id="selfie-0" class="selfie-img" style="display:none;">';
            completionHTML += '</div>';
            completionHTML += '<button class="btn btn-success" onclick="resetGame()">é‡æ–°é–‹å§‹éŠæˆ²</button>';
            completionHTML += '</div>';
            
            document.getElementById('game-content').innerHTML = completionHTML;
            updateProgress();
        }

        // é‡ç½®éŠæˆ²
        function resetGame() {
            currentLocation = 1;
            completedLocations.clear();
            hintCounters = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0};
            loadGameContent();
            updateProgress();
        }

        // åˆå§‹åŒ–
        window.addEventListener('load', function() {
            loadGameContent();
            updateProgress();
        });

        // ç°¡åŒ–çš„è‡ªæ‹åŠŸèƒ½
        function takeSelfie(locationNum) {
            var canvas = document.getElementById('canvas-' + locationNum);
            var ctx = canvas.getContext('2d');
            var img = document.getElementById('selfie-' + locationNum);
            
            // ç¹ªè£½èƒŒæ™¯
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, 600, 600);
            
            // ç¹ªè£½æ–‡å­—
            ctx.fillStyle = '#000000';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            
            var site = locationNum === 0 ? 'é¦™æ¸¯æ­·å²ç‰¹è‰²æ¢ç´¢' : getLocationName(locationNum);
            ctx.fillText('æˆ‘å·²å®Œæˆã€' + site + 'ã€‘ä»»å‹™ï¼', 300, 300);
            
            // ç¹ªè£½ç°¡å–®çš„ç›¸æ©Ÿåœ–æ¨™
            ctx.fillStyle = '#333333';
            ctx.fillRect(250, 400, 100, 80);
            ctx.fillStyle = '#cccccc';
            ctx.fillRect(270, 420, 60, 40);
            
            // é¡¯ç¤ºåœ–ç‰‡
            var dataURL = canvas.toDataURL('image/jpeg', 0.9);
            img.src = dataURL;
            img.style.display = 'block';
            
            // æ¨¡æ“¬åˆ†äº«åˆ°WhatsApp
            setTimeout(function() {
                if (confirm('æ˜¯å¦è¦åˆ†äº«åˆ° WhatsAppï¼Ÿ')) {
                    window.open('https://wa.me/?text=' + encodeURIComponent('æˆ‘å·²å®Œæˆã€' + site + 'ã€‘ä»»å‹™ï¼'), '_blank');
                }
            }, 500);
        }

        // ç²å–åœ°é»åç¨±
        function getLocationName(locationNum) {
            var locations = {
                1: 'ä¹é¾å¯¨åŸå…¬åœ’',
                2: 'ä¸­ç’°é‡‘èå€',
                3: 'é¦™æ¸¯ç¦®è³“åºœ',
                4: 'é»ƒå¤§ä»™ç¥ ',
                5: 'çŸ³æ¿è¡—',
                6: 'é¦™æ¸¯æ–‡åŒ–ä¸­å¿ƒ',
                7: 'å¤ªå¹³å±±é ‚',
                8: 'æ˜Ÿå…‰å¤§é“',
                9: 'å»Ÿè¡—å¤œå¸‚',
                10: 'åœ‹éš›é‡‘èä¸­å¿ƒ'
            };
            return locations[locationNum] || 'æœªçŸ¥åœ°é»';
        }

        // ç°¡åŒ–çš„GPSåŠŸèƒ½
        function simulateGPS() {
            var distances = [150, 320, 85, 420, 210, 180, 250, 300, 190, 280];
            
            for (var i = 1; i <= 10; i++) {
                var badge = document.getElementById('dist-' + i);
                if (badge) {
                    badge.textContent = distances[i-1] + ' m';
                    
                    // æ¨¡æ“¬åˆ°é”åœ°é»
                    if (distances[i-1] < 200 && !completedLocations.has(i)) {
                        showGPSPrompt(i);
                    }
                }
            }
        }

        // é¡¯ç¤ºGPSæç¤º
        function showGPSPrompt(poiId) {
            var prompt = document.getElementById('gpsPrompt');
            var poiName = getLocationName(poiId);
            
            document.getElementById('promptPoiName').textContent = poiName;
            prompt.dataset.poiId = poiId;
            prompt.style.display = 'block';
            
            // 5ç§’å¾Œè‡ªå‹•éš±è—
            setTimeout(function() {
                if (prompt.style.display === 'block') {
                    prompt.style.display = 'none';
                }
            }, 5000);
        }

        // é—œé–‰GPSæç¤º
        function closePrompt() {
            document.getElementById('gpsPrompt').style.display = 'none';
        }

        // æ’­æ”¾é¸æ“‡çš„å½±ç‰‡
        function playSelected(type) {
            var poiId = document.getElementById('gpsPrompt').dataset.poiId;
            closePrompt();
            showVideo(poiId, type === 'story' ? 'story' : 'history');
        }

        // åˆå§‹åŒ–GPSæ¨¡æ“¬
        setInterval(simulateGPS, 3000);
    </script>
</body>
</html>
